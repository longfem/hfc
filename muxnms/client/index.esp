<!DOCTYPE html>
<html lang="en">
<head>
    <title>数字网管</title>
    <meta charset="utf-8" />
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">    
    <link rel="stylesheet" href="css/ui.fancytree.min.css" type="text/css"> 
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/jquery.dataTables.min.css" type="text/css">
    <link rel="stylesheet" href="css/all.css" type="text/css">
</head>
<body>
	<div class="navbar">
		<nav>
			<label>数字设备网管</label>
		</nav>
    </div>
    <div id="dialog-pid" title="PID表">
        <table cellpadding="0" cellspacing="0" border="0" class="cell-border compact hover" id="tbl_pid"></table>
    </div>
    <div class="container">
		<div class="l-sidebar">	  
			<div class="ny_zb">
				<div class="ny_zblb1">
					<ul class="clearfix">
						<li id="l1">
							<a class="cur STRING_BASE" href="javascript:toHome()"><strong>基本信息</strong></a>
						</li>
						<li class="subs" id="l2">
							<a class="flag STRING_DETAIL" href="javascript:void(0)"><strong>详细信息</strong></a>
							<ul>               
								<li id="l21"><a href="javascript:devinfo_output(recdata.devType)">输出通道</a></li> 							              
								<li id="l23"><a href="javascript:gbl_monitor()">监测</a></li>
							<!--	<li id="l24"><a href="javascript:dev_srcset()">源设置</a></li>
								<li id="l25"><a href="javascript:dev_outset()">输出设置</a></li> -->
							</ul>
						</li>
						<li class="subs" id="l3">
							<a class="flag STRING_NETSET" href="javascript:void(0)"><strong>网络设置</strong></a>
							<ul>               
								<li id="l31"><a href="javascript:gbl_setIp()">IP地址设置</a></li>
							</ul>
						</li>
						<li class="subs" id="l4">
							<a class="flag STRING_MDEVICE" href="javascript:void(0)"><strong>设备管理</strong></a>
							<ul>               
								<li id="l41"><a href="">设备升级</a></li>               
								<li id="l42"><a href="javascript:gbl_reset()">恢复出厂设置</a></li>               
								<li id="l43"><a href="javascript:gbl_restart()">重启设备</a></li>
								<li id="l44"><a href="javascript:gbl_password()">修改密码</a></li>
                                <!--<li id="l45"><a href="javascript:gbl_import()">(导入/导出)配置</a></li> -->
                            </ul>
                        </li>
                        <li class="subs" id="l5">
                            <a class="flag STRING_LOG" href="javascript:void(0)"><strong>日志记录</strong></a>
                            <ul>
                                <li id="l51"><a href="javascript:alarm_output(2)">操作日志</a></li>
                                <!-- <li id="l52"><a href="javascript:alarm_output(1)">告警日志</a></li> -->
                             </ul>
                         </li>
                         <li id="l6">
                             <a href="javascript:void(0)" class="STRING_HELP"><strong>帮助</strong></a>
                         </li>
                         <li id="l7">
                             <a href="javascript:btn_close()" class="STRING_EXIT"><strong>退出</strong></a>
                         </li>
                     </ul>
                 </div>

             </div>
         </div>
         <div class="main-content">
             <!--  CONTENT  -->
		</div>
        <div id="dialog-form" title="编辑节目">
        <table class="tbl_program">
            <tr>
                <td><label>名称</label></td>
                <td><input type="text" class="prg_name" value="" /></td>
                <td><label>业务类型</label></td>
                <td>
                    <select id="r_servicetype" style="width:250px">
                        <option value ="1">[1]digital television service</option><option value ="2">[2]digital radio sound service</option>
                        <option value ="3">[3]teletext service</option><option value ="4">[4]NVOD refrence service</option>
                        <option value ="5">[5]NVOD time-shifted service</option><option value ="6">[6]mosaic service</option>
                        <option value ="7">[7]PAL coded signal</option><option value ="8">[8]SECAN coded signal</option>
                        <option value ="9">[9]D/D2 MAC</option><option value ="10">[10]FM radio</option>
                        <option value ="11">[11]NTSC coded signal</option><option value ="12">[12]data broadcast service</option>
                        <option value ="13">[13]reserved for CIU(EN 50221[16])</option><option value ="14">[14]RCS Map(see EN 301 790[34])</option>
                        <option value ="15">[15]RCS FLS(see EN 301 790[34])</option><option value ="16">[16]DVB MHP service</option>
                        <option value ="17">[17]MPEG-2 HD digital television service</option><option value ="18">[18]Reserved</option>
                        <option value ="19">[19]Reserved</option><option value ="20">[20]Reserved</option>
                        <option value ="21">[21]Reserved</option><option value ="22">[22]advanced codec SD digital television service</option>
                        <option value ="23">[23]advanced codec SD NVOD time-shifted service</option><option value ="24">[24]advanced codec SD NVOD refrence service</option>
                        <option value ="25">[25]advanced codec HD digital television service</option><option value ="26">[26]advanced codec HD NVOD time-shifted service</option>
                        <option value ="27">[27]advanced codec HD NVOD refrence service</option>
                        </select></td>
                </tr>
            <tr>
                <td><label>提供商名称</label></td>
                <td><input type="text" class="prg_merchant" value="" /></td>
                <td><label>节目号</label></td>
                <td><input type="text" style="width:50px" class="prg_no" value="" /> <label>PMT_PID(Hex)</label><input style="width:50px" type="text" class="prg_pid" value="1389" /></td>
                </tr>
            <tr>
                <td><label>PRC通道</label></td>
                <td><input disabled="disabled" type="text" class="prg_prc" value="2" /></td>
                <td><label>PRC_PID(Hex)</label></td>
                <td><input type="text" style="width:50px" class="prg_prc1" value="488" /> --><input style="width:50px" type="text" class="prg_prc2" value="488" /><input style="margin-left:10px" type="checkbox" />加扰 </td>
                </tr>
            </table>
        <div class="tbl_editprg">
            <table cellpadding="0" cellspacing="0" border="0" class="cell-border compact hover" id="tbl_editprg"></table>
            </div>
        </div>
        <div id="dialog-NITC" class="dialog-nit" title="电缆传输系统描述符">
            <div class="nit_section">
                <label>传输流ID &nbsp</label>
                <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nitc_id" value="" />
                <label>原始网络ID &nbsp</label>
                <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nitc_netid" value="" /><br/>
                <label>频率</label>
                <input type="text" class="nitc_hz" value=""/>
                <label>(KHz)eg:312000</label>
                <br/>
                <label>符号率</label>
                <input type="text" class="nitc_ksm" value=""/>
                <label>(KSymbol)eg:27450</label>
                <br/>
                <label>FEC Outer</label>
                <select id="nitc_fecout" style="width:250px">
                    <option value ="0">[0]not defined</option>
                    <option value ="1">[1]no outer FEC coding</option>
                    <option value ="2">[2]RS[204/188]</option>
                </select><br/>
                <label>FEC Inner</label>
                <select id="nitc_fecin" style="width:250px">
                    <option value ="0">[0]not defined</option>
                    <option value ="1">[1]1/2 conv.code rate</option>
                    <option value ="2">[2]2/3 conv.code rate</option>
                    <option value ="3">[3]3/4 conv.code rate</option>
                    <option value ="4">[4]5/6 conv.code rate</option>
                    <option value ="5">[5]7/8 conv.code rate</option>
                    <option value ="15">[15]no conv.code</option>
                </select><br/>
                <label>调制方式</label>
                <select id="nitc_qam" style="width:250px">
                    <option value ="0">[0]not defined</option>
                    <option value ="1">[1]16 QAM</option>
                    <option value ="2">[2]32 QAM</option>
                    <option value ="3">[3]64 QAM</option>
                    <option value ="4">[4]128 QAM</option>
                    <option value ="5">[5]256 QAM</option>
                </select><br/>
                <fieldset>
                    <legend>业务列表</legend>
                    <div class="tbl_nit">
                        <table cellpadding="0" cellspacing="0" border="0" class="cell-border compact hover" id="tbl_nitc"></table>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    <div id="dialog-NITS" class="dialog-nit" title="卫星传输系统描述符">
        <div class="nit_section">
            <label>传输流ID &nbsp</label>
            <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nits_id" value="" />
            <label>原始网络ID &nbsp</label>
            <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nits_netid" value="" /><br/>
            <label>频率</label>
            <input type="text" class="nits_hz" value=""/>
            <label>(KHz)eg:312000</label>
            <br/>
            <label>符号率</label>
            <input type="text" class="nits_ksm" value=""/>
            <label>(KSymbol)eg:27450</label>
            <br/>
            <label>轨道位置</label>
            <input type="text" class="nits_path" value=""/>
            <label>eg:192</label>
            <br/>
            <label>Polarization</label>
            <select id="nits_pol" style="width:250px">
                <option value ="0">[0]linear - horizontal</option>
                <option value ="1">[1]linear - vertical</option>
                <option value ="2">[2]Circular - left</option>
                <option value ="3">[3]Circular - right</option>
            </select><br/>
            <label>FEC Inner</label>
            <select id="nits_fecin" style="width:250px">
                <option value ="0">[0]not defined</option>
                <option value ="1">[1]1/2 conv.code rate</option>
                <option value ="2">[2]2/3 conv.code rate</option>
                <option value ="3">[3]3/4 conv.code rate</option>
                <option value ="4">[4]5/6 conv.code rate</option>
                <option value ="5">[5]7/8 conv.code rate</option>
                <option value ="15">[15]no conv.code</option>
            </select><br/>
            <label>调制方式</label>
            <select id="nits_qpsk" style="width:250px">
                <option value ="0">[0]not defined</option>
                <option value ="1">[1]QPSK</option>
            </select><br/>
            <label>东西部标示</label>
            <select id="nits_tip" style="width:250px">
                <option value ="0">[0]indicate the western position</option>
                <option value ="1">[1]indicate the eastern position</option>
            </select><br/>
            <fieldset>
                <legend>业务列表</legend>
                <div class="tbl_nit">
                    <table cellpadding="0" cellspacing="0" border="0" class="cell-border compact hover" id="tbl_nits"></table>
                </div>
            </fieldset>
        </div>
    </div>
    <div id="dialog-NITT" class="dialog-nit" title="地面传输系统描述符">
        <div class="nit_section">
            <label>传输流ID &nbsp</label>
            <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nitt_id" value="" />
            <label>原始网络ID &nbsp</label>
            <input type="text" pattern="(^0x[a-f0-9]{1,4}$)|(^0X[A-F0-9]{1,4}$)|(^[A-F0-9]{1,4}$)|(^[a-f0-9]{1,4}$)" class="nitt_netid" value="" /><br/>
            <label>频率</label>
            <input type="text" class="nitt_hz" value=""/>
            <label>(Hz)[10:42949672950]</label>
            <br/>
            <label>带宽</label>
            <select id="nitt_bandwidth" style="width:250px">
                <option value ="0">[0]8 MHz</option>
                <option value ="1">[1]7 MHz</option>
                <option value ="2">[2]6 MHz</option>
                <option value ="3">[3]5 MHz</option>
            </select><br/>
            <label>星座模式</label>
            <select id="nitt_constell" style="width:250px">
                <option value ="0">[0]QPSK</option>
                <option value ="1">[1]16 - QAM</option>
                <option value ="2">[2]64 - QAM</option>
                <option value ="3">[3]reserved</option>
            </select><br/>
            <label>传输模式</label>
            <select id="nitt_transmissionMode" style="width:250px">
                <option value ="0">[0]2K mode</option>
                <option value ="1">[1]8K mode</option>
                <option value ="2">[2]4K mode</option>
                <option value ="3">[3]reserved</option>
            </select><br/>
            <label>传输层次</label>
            <select id="nitt_hierarchy" style="width:250px">
                <option value ="0">[0]non-hierarchical,native interleaver</option>
                <option value ="1">[1]a=1,native interleaver</option>
                <option value ="2">[2]a=2,native interleaver</option>
                <option value ="3">[3]a=4,native interleaver</option>
                <option value ="4">[4]non-hierarchical,in-depth interleaver</option>
                <option value ="5">[5]a=1,in-depth interleaver</option>
                <option value ="6">[6]a=2,in-depth interleaver</option>
                <option value ="7">[7]a=4,in-depth interleaver</option>
            </select><br/>
            <label>HP stream</label>
            <select id="nitt_hp" style="width:250px">
                <option value ="0">[0]1/2</option>
                <option value ="1">[1]2/3</option>
                <option value ="2">[2]3/4</option>
                <option value ="3">[3]5/6</option>
                <option value ="4">[4]7/8</option>
            </select><br/>
            <label>LP stream</label>
            <select id="nitt_lp" style="width:250px">
                <option value ="0">[0]1/2</option>
                <option value ="1">[1]2/3</option>
                <option value ="2">[2]3/4</option>
                <option value ="3">[3]5/6</option>
                <option value ="4">[4]7/8</option>
            </select><br/>
            <label>保护间隔</label>
            <select id="nitt_gi" style="width:250px">
                <option value ="0">[0]1/32</option>
                <option value ="1">[1]1/16</option>
                <option value ="2">[2]1/8</option>
                <option value ="3">[3]1/4</option>
            </select><br/>
            <fieldset>
                <legend>业务列表</legend>
                <div class="tbl_nit">
                    <table cellpadding="0" cellspacing="0" border="0" class="cell-border compact hover" id="tbl_nitt"></table>
                </div>
            </fieldset>
        </div>
    </div>
	<div class="footer">
		<hr/>
		<p> <%= mprGetDate(0); %></p>
		<p>© Prevail Software, 2014-2024. All rights reserved.</p>
	</div>
    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="lib/jquery.fancytree.min.js"></script>    
    <script type="text/javascript" src="lib/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="lib/ichart.1.2.min.js"></script>
	<script type="text/javascript" src="js/global.js"></script> 
	<script type="text/javascript" src="js/alarm.js"></script> 
	<script type="text/javascript" src="js/devinfo.js"></script>
	<script src="lib/jquery.popup.js" type="text/javascript"></script>
	<script src="lib/jquery.fancytree.menu.js" type="text/javascript"></script>
    <script type="text/javascript">		
		var localip = window.location.href.substr(7, window.location.href.indexOf(':', 7) - 7);
		var recdata;
		var os = getOS();
		function getOS(){
            var str=navigator.userAgent;
            var BrowserS=['MSIE 9.0','MSIE 8.0','MSIE 7.0','MSIE6.0',
                'Firefox','Opera','Chrome'];
            for(var i=0;i<BrowserS.length;i++){
                if(str.indexOf(BrowserS[i])>=0){return BrowserS[i].replace('MSIE','IE');}
            }
		}
		//获取设备基本信息				
		$.ajax({
			 type: "GET",
			 async:false,
			 url: "http://"+localip+":4000/do/devinfo/getDevinfo?ip="+ localip,
			 dataType: "json",
			 success: function(data){
				recdata = data;
			 },    
			 error : function(err,b,c) {
				if(err.responseText == "login.esp"){
					window.location = "/login.esp";
				}
			 }   
		});
		$('.main-content').empty();
		$('.main-content').append(
			'<table id="basedev" class="tbl_baseinfo" cellspacing="0" width="100%">'				
				+'<tbody>'
					+'<tr>'
						+'<th><label>名称:</label></th>'
						+'<th><label id="dev-name" class="tbl_th">T192.168.1.134</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>类型:</label></th>'
						+'<th><label id="dev-type" class="tbl_th">MUX8inl</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>有效性:</label></th>'
						+'<th><label id="dev-valid" class="tbl_th">是</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>链接方式:</label></th>'
						+'<th><label id="dev-connect" class="tbl_th">TCP</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>网络地址:</label></th>'
						+'<th><label id="dev-ip" class="tbl_th">192.168.1.134</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>端口号:</label></th>'
						+'<th><label id="dev-port" class="tbl_th">161</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>硬件版本:</label></th>'
						+'<th><label id="dev-biosversion" class="tbl_th">2.00</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>软件版本:</label></th>'
						+'<th><label id="dev-softversion" class="tbl_th">2.06</label></th>'
					+'</tr>'
					+'<tr>'
						+'<th><label>固件版本:</label></th>'
						+'<th><label id="dev-firmware" class="tbl_th">1</label></th>'
					+'</tr>'
				+'</tbody>'
			+'</table>'			
		);		
		
		function toHome() {
            if(globalObj.timerID != undefined){
                clearInterval(globalObj.timerID);
            }
			//获取设备基本信息				
			$.ajax({
				 type: "GET",
				 async:false,
				 url: "http://"+localip+":4000/do/devinfo/getDevinfo?ip="+ localip,
				 dataType: "json",
				 success: function(data){
					recdata = data;
				 },    
				 error : function(err) {
				 }   
			});
			//
			//
			$('.main-content').empty();
			$('.main-content').append(
				'<table id="basedev" class="tbl_baseinfo" cellspacing="0" width="100%">'				
					+'<tbody>'
						+'<tr>'
							+'<th><label>名称:</label></th>'
							+'<th><label id="dev-name" class="tbl_th">T'+recdata.IP+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>类型:</label></th>'
							+'<th><label id="dev-type" class="tbl_th">'+recdata.devType+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>有效性:</label></th>'
							+'<th><label id="dev-valid" class="tbl_th">是</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>链接方式:</label></th>'
							+'<th><label id="dev-connect" class="tbl_th">TCP</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>网络地址:</label></th>'
							+'<th><label id="dev-ip" class="tbl_th">'+recdata.IP+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>端口号:</label></th>'
							+'<th><label id="dev-port" class="tbl_th">'+recdata.port+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>硬件版本:</label></th>'
							+'<th><label id="dev-biosversion" class="tbl_th">'+recdata.HardVersion+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>软件版本:</label></th>'
							+'<th><label id="dev-softversion" class="tbl_th">'+recdata.SoftVersion+'</label></th>'
						+'</tr>'
						+'<tr>'
							+'<th><label>固件版本:</label></th>'
							+'<th><label id="dev-firmware" class="tbl_th">'+recdata.FpgaVersion+'</label></th>'
						+'</tr>'
					+'</tbody>'
				+'</table>'	
			);
		}
		try{
            $("#dev-name")[0].textContent = "T"+recdata.IP;
            $("#dev-type")[0].textContent = recdata.devType;
            $("#dev-valid")[0].textContent = "是";
            $("#dev-connect")[0].textContent = "TCP";
            $("#dev-ip")[0].textContent = recdata.IP;
            $("#dev-port")[0].textContent = recdata.port;
            $("#dev-biosversion")[0].textContent = recdata.HardVersion;
            $("#dev-softversion")[0].textContent = recdata.SoftVersion;
            $("#dev-firmware")[0].textContent = recdata.FpgaVersion;
        }catch(err){

        }
		function btn_close() {
            if(globalObj.timerID != undefined){
                clearInterval(globalObj.timerID);
            }
			var userAgent = navigator.userAgent;
			//注销				
			$.ajax({
				 type: "GET",
				 async:false,
				 url: "http://"+localip+":4000/do/login/logout",
				 dataType: "text",
				 success: function(data){
					
				 },    
				 error : function(err) {    
   
				 }   
			});
			if (userAgent.indexOf("Firefox") != -1 || userAgent.indexOf("Presto") != -1) {
				window.location.replace("about:blank");
			} else {
				window.opener = null;
				window.open("", "_self");
				window.close();
			}
		}
		
		$(function(){						
			$(".ny_zblb1 ul li").click(function(){
				var thisSpan=$(this);
				$(".ny_zblb1 a").removeClass("cur");
				$(this).children("a").addClass("cur");
				$(this).children("ul").slideDown("fast");
				$(this).siblings().children("ul").slideUp("fast");
			});
		});
    </script> 
</body>
</html>
